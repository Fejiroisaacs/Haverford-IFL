{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/slides.css">
<link rel="stylesheet" href="/static/table.css">
<link rel="stylesheet" href="/static/index.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="/static/message-form.css">
{% endblock %}

{% block content %}
<script src="/static/slide.js" defer></script>
<script src="/static/index.js" defer></script>

<!-- NEW: Feature Announcement Banner -->
<div class="feature-announcement" id="featureBanner">
    <div class="announcement-content">
      <!--Dont forget to update bannerVersion in index.html when changing this message -->
      <div class="announcement-text">
            <strong>NEW:</strong> Redesigned Navigation! Accessibility, security, and performance enhancements across the site. Individual match page revamped. Home page links now clickable. (December 2025)
        </div>
        <button class="announcement-close" onclick="dismissBanner()">×</button>
    </div>
</div>

<section class="hero hero-video">
    <video autoplay muted loop playsinline class="hero-video-bg" preload="metadata">
        <source src="/static/Videos/Promotional/futsal_trailer.mp4" type="video/mp4">
    </video>
    <div class="hero-overlay"></div>
    <div class="hero-content hero-video-content">
        <h1>Haverford Intramural Futsal League</h1>
        <h3>Season 7 (April - May 2026)</h3>
        <div class="hero-cta-buttons">
            <a href="/matches" class="hero-btn hero-btn-primary">View Standings</a>
            <!-- <a href="/fantasy" class="hero-btn hero-btn-secondary">Join Fantasy</a> -->
            <a href="/teams" class="hero-btn hero-btn-secondary">Find Team</a>
            <a href="/players" class="hero-btn hero-btn-outline">Find Player</a>
        </div>
    </div>
</section>

<br>
<hr>

<!-- Season 6 Dashboard -->
<div class="season-dashboard">
    <h1>Season 6 Dashboard</h1>
    <div class="dashboard-container">
        <!-- Season Progress -->
        <div class="dashboard-card">
            <h3>Season Progress</h3>
            <div class="progress-content">
                <div class="progress-stat">
                    <span class="big-number">{{ season_progress.total_matchdays if season_progress.matches_played != 0 and season_progress.current_matchday == 0 else season_progress.current_matchday }}</span>
                    <span class="stat-label">/ {{ season_progress.total_matchdays }} Matchdays</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ (season_progress.current_matchday / season_progress.total_matchdays * 100) if season_progress.total_matches > 0 else 100 }}%"></div>
                </div>
                <p class="progress-text">{{ season_progress.matches_played }} of {{ season_progress.total_matches + season_progress.matches_played}} matches completed</p>
            </div>
        </div>

        <!-- Next Matchday -->
        <div class="dashboard-card highlight-card">
          {% if next_matchday.matchday %}
            <h3>Next Matchday</h3>
                <div class="next-match-content">
                    <div class="matchday-badge">MD {{ next_matchday.matchday }}</div>
                    <p class="matchday-date">{{ next_matchday.date }}</p>

                    <!-- Countdown Timer -->
                    <div class="countdown-container" id="countdownContainer" data-date="{{ next_matchday.date }}" data-time="{{ next_matchday.matches[0].time if next_matchday.matches else '' }}">
                        <div class="countdown-label">Starts in</div>
                        <div class="countdown-timer" id="countdownTimer">
                            <div class="countdown-unit">
                                <span class="countdown-value" id="countdownDays">--</span>
                                <span class="countdown-suffix">d</span>
                            </div>
                            <div class="countdown-separator">:</div>
                            <div class="countdown-unit">
                                <span class="countdown-value" id="countdownHours">--</span>
                                <span class="countdown-suffix">h</span>
                            </div>
                            <div class="countdown-separator">:</div>
                            <div class="countdown-unit">
                                <span class="countdown-value" id="countdownMinutes">--</span>
                                <span class="countdown-suffix">m</span>
                            </div>
                            <div class="countdown-separator">:</div>
                            <div class="countdown-unit">
                                <span class="countdown-value" id="countdownSeconds">--</span>
                                <span class="countdown-suffix">s</span>
                            </div>
                        </div>
                    </div>

                    <div class="upcoming-matches">
                        {% for match in next_matchday.matches[:3] %}
                            <div class="mini-match">
                                <span class="team">{{ match.team1 }}</span>
                                <span class="vs">vs</span>
                                <span class="team">{{ match.team2 }}</span>
                                <span class="match-time">{{ match.time }}</span>
                            </div>
                        {% endfor %}
                        {% if next_matchday.matches|length > 3 %}
                            <p class="more-matches">+{{ next_matchday.matches|length - 3 }} more matches</p>
                        {% endif %}
                    </div>
                </div>
            {% else %}
                <img src="/static/Images/Elements/playoffs.png" alt="Playoffs" class="leader" loading="lazy">
            {% endif %}
        </div>

        <!-- Quick Stats -->
        <div class="dashboard-card">
            <h3>Season 6 Stats</h3>
            <div class="quick-stats">
                <div class="stat-item">
                    <span class="stat-number">{{ season_stats.total_goals }}</span>
                    <span class="stat-label">Total Goals</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ season_stats.avg_goals }}</span>
                    <span class="stat-label">Goals/Match</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ season_stats.total_teams }}</span>
                    <span class="stat-label">Teams</span>
                </div>
            </div>
            <div class="biggest-win">
                <p><strong>Biggest Win:</strong></p>
                <p>{{ season_stats.biggest_win }}</p>
            </div>
        </div>
    </div>
</div>

<br>
<hr>
<br>

<!-- Season 6 Top Performers -->
<div class="top-performers-section">
    <h1>Season 6 Top Performers</h1>
    <div class="performers-container">
        <!-- Top Scorers -->
        <div class="performer-category">
            <h3>Top Scorers</h3>
            <div class="performer-list">
                {% for player in top_performers.scorers %}
                    <a href="/players/{{ player.Name }}" class="performer-card-link" aria-label="View {{ player.Name }}'s player profile - {{ player.Goals }} goals for {{ player.Team }}">
                        <div class="performer-card">
                            <p class="player-name">{{ player.Name }}</p>
                            <p class="player-team">{{ player.Team }}</p>
                            <p class="player-stat">{{ player.Goals }} Goals</p>
                        </div>
                    </a>
                {% endfor %}
                {% if top_performers.scorers|length == 0 %}
                    <p>No data available yet</p>
                {% endif %}
            </div>
        </div>

        <!-- Top Assisters -->
        <div class="performer-category">
            <h3>Top Assists</h3>
            <div class="performer-list">
                {% for player in top_performers.assisters %}
                    <a href="/players/{{ player.Name }}" class="performer-card-link" aria-label="View {{ player.Name }}'s player profile - {{ player.Assists }} assists for {{ player.Team }}">
                        <div class="performer-card">
                            <p class="player-name">{{ player.Name }}</p>
                            <p class="player-team">{{ player.Team }}</p>
                            <p class="player-stat">{{ player.Assists }} Assists</p>
                        </div>
                    </a>
                {% endfor %}
                {% if top_performers.assisters|length == 0 %}
                    <p>No data available yet</p>
                {% endif %}
            </div>
        </div>

        <!-- Top Goalkeepers -->
        <div class="performer-category">
            <h3>Top Goalkeepers</h3>
            <div class="performer-list">
                {% for player in top_performers.goalkeepers %}
                    <a href="/players/{{ player.Name }}" class="performer-card-link" aria-label="View {{ player.Name }}'s player profile - {{ player.Saves }} saves for {{ player.Team }}">
                        <div class="performer-card">
                            <p class="player-name">{{ player.Name }}</p>
                            <p class="player-team">{{ player.Team }}</p>
                            <p class="player-stat">{{ player.Saves }} Saves</p>
                        </div>
                    </a>
                {% endfor %}
                {% if top_performers.goalkeepers|length == 0 %}
                    <p>No data available yet</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<br>
<hr>
<br>

<!-- Group Leaders -->
<div class="group-leaders-section">
    <h1>Group Leaders</h1>
    <div class="groups-container">
        {% for group in ['A', 'B', 'C'] %}
            <div class="group-table">
                <h3>Group {{ group }}</h3>
                <div class="tbl-content">
                    <table>
                        <thead>
                            <tr class="tbl-header">
                                <th class="tbl-col1">Team</th>
                                <th>MP</th>
                                <th>W</th>
                                <th>D</th>
                                <th>L</th>
                                <th>PTS</th>
                                <th>GD</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for team in group_leaders[group] %}
                                <tr onclick="window.open('/teams/{{ team.Team }}', '_blank')"
                                    onkeydown="if(event.key==='Enter'||event.key===' ') window.open('/teams/{{ team.Team }}', '_blank')"
                                    role="button"
                                    tabindex="0"
                                    aria-label="View {{ team.Team }} team profile - {{ team.PTS }} points, {{ team.W }} wins">
                                    <td class="tbl-col1">{{ team.Team }}</td>
                                    <td>{{ team.MP }}</td>
                                    <td>{{ team.W }}</td>
                                    <td>{{ team.D }}</td>
                                    <td>{{ team.L }}</td>
                                    <td><strong>{{ team.PTS }}</strong></td>
                                    <td>{{ team.GD }}</td>
                                </tr>
                            {% endfor %}
                            {% if group_leaders[group]|length == 0 %}
                                <tr><td colspan="7">No data available</td></tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<br>
<hr>
<br>

<!-- Latest Results -->
<div class="latest-results-section">
    <h1>Latest Results</h1>
    <div class="results-grid">
        {% for match in latest_results %}
            <a href="/teams/{{ match.team1 }}/{{ match.team1 }}-{{ match.team2 }}-{{ match.match_id }}" class="result-card-link" aria-label="View match details: {{ match.team1 }} vs {{ match.team2 }}, final score {{ match.score }}">
                <div class="result-card">
                    <span class="match-group">{{ "Group" + match.group if match.group|length == 1 else match.group }}</span>
                    <div class="result-content">
                        <span class="result-team">{{ match.team1 }}</span>
                        <span class="result-score">{{ match.score }}</span>
                        <span class="result-team">{{ match.team2 }}</span>
                    </div>
                </div>
            </a>
        {% endfor %}
        {% if latest_results|length == 0 %}
            <p>No matches played yet</p>
        {% endif %}
    </div>
</div>

<br>
<hr>
<br>

<h1 style="margin-bottom:-6rem;">IFL Champions</h1>
<div class="content-width">
    <div class="slideshow">
      <div class="slideshow-items">
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/1.jpg" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>TEAM MUNCH</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 1</b>
            </span>     
            <span class="vertical-part">
              <b>We would like to Congratulate our Inaugural IFL Champions Meunch FC for a resounding 7-2 Victory against a valiantly performing Brixton side. It was an absolute show, with some amazing goals, fans, commentary, and skill on display!!! Incredible final, and an incredible win from the all freshman team. Thank you to everyone who contributed to this finale!</b>
            </span>     
          </div>
        </div>
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/2.jpg" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>TEAM MUNCH</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 2</b>
            </span>
            <span class="vertical-part">
              <b>Brixton were there with a vengeance. Some crucial saves by Ben, and a tight counter pressing game kept Brixton high up on the pitch and looking forward, able to fight back when Behind. Meunch kept their cool, epitomized by Krishs sensational Volley for Meunchs second. With a minute of regular time left, Meunch reacted to Brixtons fight back with a knock-out punch on the Bullies.</b>
            </span>
          </div>
        </div>
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/3.jpg" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>TEAM MUNCH</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 3</b>
            </span>
            <span class="vertical-part">
              <b>There was an incredible atmosphere and support for our finalists and the final matched the intensity. Munch played an incredible press to take and hold an early lead with Owen finding the key breakthroughs. BNC played some beautiful stuff but could not find a way past James in goal who keeps the first finals clean sheet. High quality possession and some great skill saw a show which ended with MCHs IFL 3-peat!</b>
            </span>
          </div>
        </div>
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/4.jpg" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>BRIXTON &nbsp</b></span>
            <span class="vertical-part"><b>BULLIES</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 4</b>
            </span>
            <span class="vertical-part">
              <b>And..... Time! Its third time lucky for the Brixton Bullies who played some fluid, brilliant, futsal, putting a spear through Munchs hopes of a 4-peat. Bangers from Isaiah and Alex, served up by Amartya, see the Bullies lift the biggest trophy in what is, for many, their last dance.</b>
            </span>
          </div>
        </div>
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/5.png" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>NPC TEAM</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 5</b>
            </span>
            <span class="vertical-part">
              <b>In a surprise to pretty much everyone, NPC Team manages to pull off a shocking 1-0 upset against Soccer Extraordinaires. Going in as the heavy underdogs facing Varsity Soccer, they were just trying to keep the game close. However, NPC demonstrates a masterclass in defense, keeping a clean sheet against a stacked team who put 6 away just a day before on reigning IFL Champions Brixton. Grant takes the POTM, making 10 crucial saves in NPC's second-ever playoff clean sheet.</b>
            </span>
          </div>
        </div>
        <div class="item">
          <div class="item-image-container">
            <img class="item-image" src="/static/Images/champs/6.png" loading="lazy" />
          </div>
          <div class="item-header">
            <span class="vertical-part"><b>BINGCHILLIN</b></span>
          </div>
          <div class="item-description">
            <span class="vertical-part">
              <b style='font-size:2rem;'>Season 6</b>
            </span>
            <span class="vertical-part">
              <b>Wow! After an electric playoffs season with the most high-level futsal we've seen to date, it all concluded last Sunday with the IFL final. In a shock to everyone but themselves, BingChillin ran through an otherwise dominant Richard's Futsal Team by a score of 10-3. Thomas Vanni had an incredible 8 goal contributions, earning himself both Finals MVP and Golden GOAT. While Richard's Futsal Team, led by Juan Rivera, put up valiant resistance in the first half, they eventually crumbled under the pressure of BingChillin, who have won the title in their second trip to the finals.</b>
            </span>
          </div>
        </div>
      </div> 
      <div class="controls">
        <ul>
          <li class="control" data-index="0"></li>
          <li class="control" data-index="1"></li>
          <li class="control" data-index="2"></li>
          <li class="control" data-index="3"></li>
          <li class="control" data-index="4"></li>
          <li class="control" data-index="5"></li>
        </ul>
      </div>
    </div>
</div>

<h1 class='stats'>All Time Legends</h1>
<br>
<div class='stats-leaders'>
    <div class='leader'>
        <h3>Rami Nasr</h3>
        <a href="/players/Rami Nasr" target="_blank">
            <img src="/static/Images/POTM/260.png" alt="Rami Nasr" loading="lazy"/>
        </a>
        <h3>91 Goals</h3>
    </div>

    <div class='leader'>
        <h3>Owen Sykes</h3>
        <a href="/players/Owen Sykes" target="_blank">
            <img src="/static/Images/POTM/110.png" alt="Owen Sykes" loading="lazy"/>
        </a>
        <h3>35 Assists</h3>
    </div>

    <div class='leader'>
        <h3>Ben Mansfield</h3>
        <a href="/players/Ben Mansfield" target="_blank">
            <img src="/static/Images/POTM/262.png" alt="Ben Mansfield" loading="lazy"/>
        </a>
        <h3>262 Saves</h3>
    </div>

    <div class='leader'>
        <h3>Rami Nasr</h3>
        <a href="/players/Rami Nasr" target="_blank">
            <img src="/static/Images/POTM/253.png" alt="Rami Nasr" loading="lazy"/>
        </a>
        <h3>12 POTM</h3>
    </div>

</div>

<br>
<hr>
<br>

<div class="video-section">
  <h1>IFL Promotional Video</h1>
  <br>
  <div class="video-container">
      <video controls autoplay loop muted>
          <source src="/static/Videos/Promotional/futsal_trailer.mp4" type="video/mp4">
          Your browser does not support the video tag.
      </video>
  </div> 
</div>

<br>
<br>
<hr>

<a href="/static/IFL_Rule_Book.pdf" download>
  <button class='btn btn-primary'>Download IFL Rule Book</button>
</a>

<!-- What's New Floating Button -->
<button class="whats-new-btn" onclick="openWhatsNew()">
    <span class="notification-dot"></span>
    What's New
</button>

<div id="whatsNewModal" class="whats-new-modal">
    <div class="whats-new-content">
        <span class="close-whats-new" onclick="closeWhatsNew()">&times;</span>
        <h2><i class="fas fa-trophy feature-icon"></i> What's New in IFL <i class="fas fa-trophy feature-icon"></i></h2>

        <div class="feature-item">
          <div class="feature-date">December 2025</div>

          <h3>Redesigned Navigation System</h3>
          <p><strong>Desktop Navigation:</strong> Cleaner, more organized menu with dropdown groupings for League Info (Statistics, Hall of Fame, Archives)</p>
          <p><strong>Mobile Navigation:</strong> Improved sidebar with visual sections and dividers for better organization</p>
          <br>
          <br>
          <h3>Individual Match Page Revamp</h3>
          <p>Improved layout with new display stats for better clarity.</p>
          <a href="/teams/RFT/RFT-BNC-265" class="feature-link">
            <i class="fa fa-external-link"></i> Check it out →
          </a>
          <br>
          <br>
          <h3>UI Improvements and Optimization</h3>
          <p>Faster load times and smoother transitions across the site. Enhanced responsiveness for all devices.</p>
          <p>Improved accessibility features for better user experience.</p>
          <p>Screen reader compatibility enhancements.</p>
          <p>Security enhancements.</p>
        </div>

        <h2 style="margin-top: 2rem;"><i class="fas fa-clock-o feature-icon"></i> Coming Soon <i class="fas fa-clock-o feature-icon"></i></h2>

        <div class="feature-item upcoming-feature">
          <h3>Statistics Dashboard</h3>
          <p>Comprehensive league statistics with player rankings, team performance analytics, and season trends. Track all-time leaders, current season stats, and rating distributions.</p>
        </div>

        <div class="feature-item upcoming-feature">
          <h3>Hall of Fame</h3>
          <p>Celebrate legendary players and their incredible achievements. View career highlights, awards, and memorable moments from the league's history.</p>
        </div>

        <div class="feature-item upcoming-feature">
          <h3>Season Archives</h3>
          <p>Explore historical data from past seasons. Browse standings, top performers, and relive memorable moments from previous campaigns.</p>
        </div>

        <div class="feature-item upcoming-feature">
          <h3>Photo Gallery</h3>
          <p>Browse photos and memorable moments from all seasons. Relive the action with our curated collection of match-day images.</p>
        </div>

        <div style="text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 2px solid #e5e7eb;">
          <a href="/patch-notes" class="feature-link" style="font-size: 1.1rem;">
            <i class="fa fa-file-text-o"></i> View Full Patch Notes →
          </a>
        </div>
    </div>
</div>


{% endblock %}
